<!DOCTYPE html>
<html lang="es">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Datos</title>
   <link rel="stylesheet" href="css/estilos.css">
</head>
<body>
   <h1>Estadisticas</h1>

   <!-- Tabla principal -->
   <h2></h2>
   <table id="tablaPrincipal">
       <thead>
           <tr id="encabezadoPrincipal"></tr>
       </thead>
       <tbody>
       </tbody>
   </table>

   <!-- Tabla de las últimas dos filas (sin encabezados) -->
   <h2></h2>
   <table id="tablaUltimasFilas">
       <tbody>
       </tbody>
   </table>
  
   <script>
       document.addEventListener("DOMContentLoaded", function() {
           const tablaPrincipalHead = document.querySelector("#tablaPrincipal thead tr");
           const tablaPrincipalBody = document.querySelector("#tablaPrincipal tbody");
           const tablaUltimasFilasBody = document.querySelector("#tablaUltimasFilas tbody");

           // Ruta al archivo CSV
           const filePath = 'dades/resultados_generales.csv';

           // Función para leer el archivo CSV
           fetch(filePath)
               .then(response => response.text())
               .then(data => {
                   const rows = data.split('\n').filter(row => row.trim() !== '');

                   // Extraer la primera línea como encabezado
                   const headerRow = rows[0].split(',');

                   // Crear los encabezados de la tabla principal
                   headerRow.forEach(header => {
                       const th = document.createElement('th');
                       th.textContent = header.trim();
                       tablaPrincipalHead.appendChild(th);
                   });

                   // Extraer las líneas principales (todas menos la primera y las últimas dos)
                   const mainRows = rows.slice(1, -2);

                   // Extraer las dos últimas líneas
                   const lastTwoRows = rows.slice(-2);

                   // Función para agregar filas a una tabla
                   const addRowsToTable = (rows, tableBody) => {
                       rows.forEach(row => {
                           const cols = row.split(',');
                           if (cols.length > 1) {
                               const tr = document.createElement('tr');
                               cols.forEach(col => {
                                   const td = document.createElement('td');
                                   td.textContent = col.trim();
                                   tr.appendChild(td);
                               });
                               tableBody.appendChild(tr);
                           }
                       });
                   };

                   // Agregar las filas principales a la tabla principal
                   addRowsToTable(mainRows, tablaPrincipalBody);

                   // Agregar las últimas dos filas a la tabla correspondiente
                   addRowsToTable(lastTwoRows, tablaUltimasFilasBody);
               })
               .catch(error => {
                   console.error('Error al leer el archivo CSV:', error);
               });
       });
   </script>
</body>
</html>
